{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pmakwatse\\\\React w Tailwind Projects\\\\24h Story Feature\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Toaster } from 'react-hot-toast';\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\nimport StoriesBar from './components/StoriesBar';\nimport StoryViewer from './components/StoryViewer';\nimport AuthModal from './components/AuthModal';\nimport { resizeImage, groupStoriesByUser } from './utils/imageUtils';\nimport { api } from './utils/api';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AppContent() {\n  _s();\n  const [stories, setStories] = useState([]);\n  const [viewerOpen, setViewerOpen] = useState(false);\n  const [selectedUserStories, setSelectedUserStories] = useState([]);\n  const {\n    isAuthenticated,\n    user,\n    logout\n  } = useAuth();\n\n  // Load stories from API\n  const loadStories = async () => {\n    try {\n      const storiesData = await api.getStories();\n      if (storiesData.error) {\n        toast.error(storiesData.error);\n      } else {\n        setStories(storiesData);\n      }\n    } catch (error) {\n      toast.error('Failed to load stories');\n    }\n  };\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadStories();\n    }\n  }, [isAuthenticated]);\n  const handleAddStory = async (file, caption) => {\n    try {\n      const resizedImage = await resizeImage(file);\n      const result = await api.uploadStory(resizedImage, caption);\n      if (result.error) {\n        toast.error(result.error);\n      } else {\n        toast.success('Story uploaded successfully!');\n        loadStories(); // Refresh stories\n      }\n    } catch (error) {\n      toast.error('Failed to upload story');\n    }\n  };\n  const handleStoryClick = userId => {\n    const groupedStories = groupStoriesByUser(stories);\n    setSelectedUserStories(groupedStories[userId].stories);\n    setViewerOpen(true);\n  };\n  const handleStoryViewed = () => {\n    // Refresh stories to update view status\n    loadStories();\n  };\n  const handleCloseViewer = () => {\n    setViewerOpen(false);\n  };\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(AuthModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-white dark:bg-gray-900\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-bold text-gray-900 dark:text-white\",\n        children: \"Stories\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-600 dark:text-gray-400\",\n          children: [\"Welcome, \", user === null || user === void 0 ? void 0 : user.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: logout,\n          className: \"px-3 py-1 text-sm text-white bg-red-500 hover:bg-red-600 font-medium rounded-md border border-red-500 hover:border-red-600 transition-all duration-200\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StoriesBar, {\n      stories: stories,\n      onAddStory: handleAddStory,\n      onStoryClick: handleStoryClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto px-4 py-8\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 dark:text-gray-400\",\n        children: \"Share moments that disappear after 24 hours. Click the + button to add your story.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), viewerOpen && /*#__PURE__*/_jsxDEV(StoryViewer, {\n      userStories: selectedUserStories,\n      onClose: handleCloseViewer,\n      onStoryViewed: handleStoryViewed\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Toaster, {\n      position: \"top-right\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(AppContent, \"z6HfgB+yvG1NORkEYCIh0YGVeBM=\", false, function () {\n  return [useAuth];\n});\n_c = AppContent;\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(AuthProvider, {\n    children: /*#__PURE__*/_jsxDEV(AppContent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"AppContent\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Toaster","AuthProvider","useAuth","StoriesBar","StoryViewer","AuthModal","resizeImage","groupStoriesByUser","api","toast","jsxDEV","_jsxDEV","AppContent","_s","stories","setStories","viewerOpen","setViewerOpen","selectedUserStories","setSelectedUserStories","isAuthenticated","user","logout","loadStories","storiesData","getStories","error","handleAddStory","file","caption","resizedImage","result","uploadStory","success","handleStoryClick","userId","groupedStories","handleStoryViewed","handleCloseViewer","fileName","_jsxFileName","lineNumber","columnNumber","className","children","username","onClick","onAddStory","onStoryClick","userStories","onClose","onStoryViewed","position","_c","App","_c2","$RefreshReg$"],"sources":["C:/Users/pmakwatse/React w Tailwind Projects/24h Story Feature/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Toaster } from 'react-hot-toast';\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\nimport StoriesBar from './components/StoriesBar';\nimport StoryViewer from './components/StoryViewer';\nimport AuthModal from './components/AuthModal';\nimport { resizeImage, groupStoriesByUser } from './utils/imageUtils';\nimport { api } from './utils/api';\nimport toast from 'react-hot-toast';\n\nfunction AppContent() {\n  const [stories, setStories] = useState([]);\n  const [viewerOpen, setViewerOpen] = useState(false);\n  const [selectedUserStories, setSelectedUserStories] = useState([]);\n  const { isAuthenticated, user, logout } = useAuth();\n\n  // Load stories from API\n  const loadStories = async () => {\n    try {\n      const storiesData = await api.getStories();\n      if (storiesData.error) {\n        toast.error(storiesData.error);\n      } else {\n        setStories(storiesData);\n      }\n    } catch (error) {\n      toast.error('Failed to load stories');\n    }\n  };\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadStories();\n    }\n  }, [isAuthenticated]);\n\n  const handleAddStory = async (file, caption) => {\n    try {\n      const resizedImage = await resizeImage(file);\n      const result = await api.uploadStory(resizedImage, caption);\n      \n      if (result.error) {\n        toast.error(result.error);\n      } else {\n        toast.success('Story uploaded successfully!');\n        loadStories(); // Refresh stories\n      }\n    } catch (error) {\n      toast.error('Failed to upload story');\n    }\n  };\n\n  const handleStoryClick = (userId) => {\n    const groupedStories = groupStoriesByUser(stories);\n    setSelectedUserStories(groupedStories[userId].stories);\n    setViewerOpen(true);\n  };\n\n  const handleStoryViewed = () => {\n    // Refresh stories to update view status\n    loadStories();\n  };\n\n  const handleCloseViewer = () => {\n    setViewerOpen(false);\n  };\n\n  if (!isAuthenticated) {\n    return <AuthModal />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white dark:bg-gray-900\">\n      <div className=\"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700\">\n        <h1 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n          Stories\n        </h1>\n        <div className=\"flex items-center space-x-4\">\n          <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n            Welcome, {user?.username}\n          </span>\n          <button\n            onClick={logout}\n            className=\"px-3 py-1 text-sm text-white bg-red-500 hover:bg-red-600 font-medium rounded-md border border-red-500 hover:border-red-600 transition-all duration-200\"\n          >\n            Logout\n          </button>\n        </div>\n      </div>\n\n      <StoriesBar \n        stories={stories}\n        onAddStory={handleAddStory}\n        onStoryClick={handleStoryClick}\n      />\n      \n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        <p className=\"text-gray-600 dark:text-gray-400\">\n          Share moments that disappear after 24 hours. Click the + button to add your story.\n        </p>\n      </div>\n\n      {viewerOpen && (\n        <StoryViewer\n          userStories={selectedUserStories}\n          onClose={handleCloseViewer}\n          onStoryViewed={handleStoryViewed}\n        />\n      )}\n      \n      <Toaster position=\"top-right\" />\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <AppContent />\n    </AuthProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}