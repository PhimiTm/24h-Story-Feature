{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pmakwatse\\\\React w Tailwind Projects\\\\24h Story Feature\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Toaster } from 'react-hot-toast';\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\nimport StoriesBar from './components/StoriesBar';\nimport StoryViewer from './components/StoryViewer';\nimport AuthModal from './components/AuthModal';\nimport { resizeImage, groupStoriesByUser } from './utils/imageUtils';\nimport { api } from './utils/api';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AppContent() {\n  _s();\n  const [stories, setStories] = useState([]);\n  const [viewerOpen, setViewerOpen] = useState(false);\n  const [selectedUserStories, setSelectedUserStories] = useState([]);\n  const {\n    isAuthenticated,\n    user\n  } = useAuth();\n\n  // Load stories from API\n  const loadStories = async () => {\n    try {\n      const storiesData = await api.getStories();\n      if (storiesData.error) {\n        toast.error(storiesData.error);\n      } else {\n        setStories(storiesData);\n      }\n    } catch (error) {\n      toast.error('Failed to load stories');\n    }\n  };\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadStories();\n    }\n  }, [isAuthenticated]);\n  const handleAddStory = async (file, caption) => {\n    try {\n      const resizedImage = await resizeImage(file);\n      const result = await api.uploadStory(resizedImage, caption);\n      if (result.error) {\n        toast.error(result.error);\n      } else {\n        toast.success('Story uploaded successfully!');\n        loadStories(); // Refresh stories\n      }\n    } catch (error) {\n      toast.error('Failed to upload story');\n    }\n  };\n  const handleStoryClick = userId => {\n    const groupedStories = groupStoriesByUser(stories);\n    setSelectedUserStories(groupedStories[userId].stories);\n    setViewerOpen(true);\n  };\n  const handleCloseViewer = () => {\n    setViewerOpen(false);\n  };\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(AuthModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-white dark:bg-gray-900\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-bold text-gray-900 dark:text-white\",\n        children: \"Stories\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-600 dark:text-gray-400\",\n          children: [\"Welcome, \", user === null || user === void 0 ? void 0 : user.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            const {\n              logout\n            } = require('./contexts/AuthContext');\n            logout();\n          },\n          className: \"text-sm text-red-500 hover:text-red-600 font-medium\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StoriesBar, {\n      stories: stories,\n      onAddStory: handleAddStory,\n      onStoryClick: handleStoryClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto px-4 py-8\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 dark:text-gray-400\",\n        children: \"Share moments that disappear after 24 hours. Click the + button to add your story.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), viewerOpen && /*#__PURE__*/_jsxDEV(StoryViewer, {\n      userStories: selectedUserStories,\n      onClose: handleCloseViewer\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Toaster, {\n      position: \"top-right\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(AppContent, \"j6ZhfUbfuOMVxUq0lJ/hlQ71vks=\", false, function () {\n  return [useAuth];\n});\n_c = AppContent;\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(AuthProvider, {\n    children: /*#__PURE__*/_jsxDEV(AppContent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"AppContent\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Toaster","AuthProvider","useAuth","StoriesBar","StoryViewer","AuthModal","resizeImage","groupStoriesByUser","api","toast","jsxDEV","_jsxDEV","AppContent","_s","stories","setStories","viewerOpen","setViewerOpen","selectedUserStories","setSelectedUserStories","isAuthenticated","user","loadStories","storiesData","getStories","error","handleAddStory","file","caption","resizedImage","result","uploadStory","success","handleStoryClick","userId","groupedStories","handleCloseViewer","fileName","_jsxFileName","lineNumber","columnNumber","className","children","username","onClick","logout","require","onAddStory","onStoryClick","userStories","onClose","position","_c","App","_c2","$RefreshReg$"],"sources":["C:/Users/pmakwatse/React w Tailwind Projects/24h Story Feature/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Toaster } from 'react-hot-toast';\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\nimport StoriesBar from './components/StoriesBar';\nimport StoryViewer from './components/StoryViewer';\nimport AuthModal from './components/AuthModal';\nimport { resizeImage, groupStoriesByUser } from './utils/imageUtils';\nimport { api } from './utils/api';\nimport toast from 'react-hot-toast';\n\nfunction AppContent() {\n  const [stories, setStories] = useState([]);\n  const [viewerOpen, setViewerOpen] = useState(false);\n  const [selectedUserStories, setSelectedUserStories] = useState([]);\n  const { isAuthenticated, user } = useAuth();\n\n  // Load stories from API\n  const loadStories = async () => {\n    try {\n      const storiesData = await api.getStories();\n      if (storiesData.error) {\n        toast.error(storiesData.error);\n      } else {\n        setStories(storiesData);\n      }\n    } catch (error) {\n      toast.error('Failed to load stories');\n    }\n  };\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadStories();\n    }\n  }, [isAuthenticated]);\n\n  const handleAddStory = async (file, caption) => {\n    try {\n      const resizedImage = await resizeImage(file);\n      const result = await api.uploadStory(resizedImage, caption);\n      \n      if (result.error) {\n        toast.error(result.error);\n      } else {\n        toast.success('Story uploaded successfully!');\n        loadStories(); // Refresh stories\n      }\n    } catch (error) {\n      toast.error('Failed to upload story');\n    }\n  };\n\n  const handleStoryClick = (userId) => {\n    const groupedStories = groupStoriesByUser(stories);\n    setSelectedUserStories(groupedStories[userId].stories);\n    setViewerOpen(true);\n  };\n\n  const handleCloseViewer = () => {\n    setViewerOpen(false);\n  };\n\n  if (!isAuthenticated) {\n    return <AuthModal />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white dark:bg-gray-900\">\n      <div className=\"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700\">\n        <h1 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n          Stories\n        </h1>\n        <div className=\"flex items-center space-x-4\">\n          <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n            Welcome, {user?.username}\n          </span>\n          <button\n            onClick={() => {\n              const { logout } = require('./contexts/AuthContext');\n              logout();\n            }}\n            className=\"text-sm text-red-500 hover:text-red-600 font-medium\"\n          >\n            Logout\n          </button>\n        </div>\n      </div>\n\n      <StoriesBar \n        stories={stories}\n        onAddStory={handleAddStory}\n        onStoryClick={handleStoryClick}\n      />\n      \n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        <p className=\"text-gray-600 dark:text-gray-400\">\n          Share moments that disappear after 24 hours. Click the + button to add your story.\n        </p>\n      </div>\n\n      {viewerOpen && (\n        <StoryViewer\n          userStories={selectedUserStories}\n          onClose={handleCloseViewer}\n        />\n      )}\n      \n      <Toaster position=\"top-right\" />\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <AppContent />\n    </AuthProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}