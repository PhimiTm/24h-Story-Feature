{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pmakwatse\\\\React w Tailwind Projects\\\\24h Story Feature\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Toaster } from 'react-hot-toast';\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\nimport StoriesBar from './components/StoriesBar';\nimport StoryViewer from './components/StoryViewer';\nimport AuthModal from './components/AuthModal';\nimport PostComposer from './components/PostComposer';\nimport PostsFeed from './components/PostsFeed';\nimport { resizeImage, groupStoriesByUser } from './utils/imageUtils';\nimport { api } from './utils/api';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AppContent() {\n  _s();\n  const [stories, setStories] = useState([]);\n  const [posts, setPosts] = useState([]);\n  const [viewerOpen, setViewerOpen] = useState(false);\n  const [selectedUserStories, setSelectedUserStories] = useState([]);\n  const {\n    isAuthenticated,\n    user,\n    logout\n  } = useAuth();\n\n  // Load stories from API\n  const loadStories = async () => {\n    try {\n      const storiesData = await api.getStories();\n      if (storiesData.error) {\n        toast.error(storiesData.error);\n      } else {\n        setStories(storiesData);\n      }\n    } catch (error) {\n      toast.error('Failed to load stories');\n    }\n  };\n\n  // Load posts from API\n  const loadPosts = async () => {\n    try {\n      const postsData = await api.getPosts();\n      if (postsData.error) {\n        toast.error(postsData.error);\n      } else {\n        setPosts(postsData);\n      }\n    } catch (error) {\n      toast.error('Failed to load posts');\n    }\n  };\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadStories();\n      loadPosts();\n    }\n  }, [isAuthenticated]);\n  const handleAddStory = async (file, caption) => {\n    try {\n      const resizedImage = await resizeImage(file);\n      const result = await api.uploadStory(resizedImage, caption);\n      if (result.error) {\n        toast.error(result.error);\n      } else {\n        toast.success('Story uploaded successfully!');\n        loadStories(); // Refresh stories\n      }\n    } catch (error) {\n      toast.error('Failed to upload story');\n    }\n  };\n  const handleStoryClick = userId => {\n    const groupedStories = groupStoriesByUser(stories);\n    setSelectedUserStories(groupedStories[userId].stories);\n    setViewerOpen(true);\n  };\n  const handleStoryViewed = () => {\n    // Refresh stories to update view status\n    loadStories();\n  };\n  const handlePostCreated = async content => {\n    const result = await api.createPost(content);\n    if (result.error) {\n      throw new Error(result.error);\n    }\n    loadPosts(); // Refresh posts\n  };\n  const handleCloseViewer = () => {\n    setViewerOpen(false);\n  };\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(AuthModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-white dark:bg-gray-900\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-bold text-gray-900 dark:text-white\",\n        children: \"Stories\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-600 dark:text-gray-400\",\n          children: [\"Welcome, \", user === null || user === void 0 ? void 0 : user.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: logout,\n          className: \"px-3 py-1 text-sm text-white bg-red-500 hover:bg-red-600 font-medium rounded-md border border-red-500 hover:border-red-600 transition-all duration-200\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StoriesBar, {\n      stories: stories,\n      onAddStory: handleAddStory,\n      onStoryClick: handleStoryClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-2xl mx-auto px-4 py-8\",\n      children: [/*#__PURE__*/_jsxDEV(PostComposer, {\n        onPostCreated: handlePostCreated,\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PostsFeed, {\n        posts: posts,\n        onPostsUpdate: loadPosts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), viewerOpen && /*#__PURE__*/_jsxDEV(StoryViewer, {\n      userStories: selectedUserStories,\n      onClose: handleCloseViewer,\n      onStoryViewed: handleStoryViewed\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Toaster, {\n      position: \"top-right\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n}\n_s(AppContent, \"dMt7YoqRF2xHCSB8V+mq076UoVI=\", false, function () {\n  return [useAuth];\n});\n_c = AppContent;\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(AuthProvider, {\n    children: /*#__PURE__*/_jsxDEV(AppContent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"AppContent\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Toaster","AuthProvider","useAuth","StoriesBar","StoryViewer","AuthModal","PostComposer","PostsFeed","resizeImage","groupStoriesByUser","api","toast","jsxDEV","_jsxDEV","AppContent","_s","stories","setStories","posts","setPosts","viewerOpen","setViewerOpen","selectedUserStories","setSelectedUserStories","isAuthenticated","user","logout","loadStories","storiesData","getStories","error","loadPosts","postsData","getPosts","handleAddStory","file","caption","resizedImage","result","uploadStory","success","handleStoryClick","userId","groupedStories","handleStoryViewed","handlePostCreated","content","createPost","Error","handleCloseViewer","fileName","_jsxFileName","lineNumber","columnNumber","className","children","username","onClick","onAddStory","onStoryClick","onPostCreated","onPostsUpdate","userStories","onClose","onStoryViewed","position","_c","App","_c2","$RefreshReg$"],"sources":["C:/Users/pmakwatse/React w Tailwind Projects/24h Story Feature/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Toaster } from 'react-hot-toast';\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\nimport StoriesBar from './components/StoriesBar';\nimport StoryViewer from './components/StoryViewer';\nimport AuthModal from './components/AuthModal';\nimport PostComposer from './components/PostComposer';\nimport PostsFeed from './components/PostsFeed';\nimport { resizeImage, groupStoriesByUser } from './utils/imageUtils';\nimport { api } from './utils/api';\nimport toast from 'react-hot-toast';\n\nfunction AppContent() {\n  const [stories, setStories] = useState([]);\n  const [posts, setPosts] = useState([]);\n  const [viewerOpen, setViewerOpen] = useState(false);\n  const [selectedUserStories, setSelectedUserStories] = useState([]);\n  const { isAuthenticated, user, logout } = useAuth();\n\n  // Load stories from API\n  const loadStories = async () => {\n    try {\n      const storiesData = await api.getStories();\n      if (storiesData.error) {\n        toast.error(storiesData.error);\n      } else {\n        setStories(storiesData);\n      }\n    } catch (error) {\n      toast.error('Failed to load stories');\n    }\n  };\n\n  // Load posts from API\n  const loadPosts = async () => {\n    try {\n      const postsData = await api.getPosts();\n      if (postsData.error) {\n        toast.error(postsData.error);\n      } else {\n        setPosts(postsData);\n      }\n    } catch (error) {\n      toast.error('Failed to load posts');\n    }\n  };\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadStories();\n      loadPosts();\n    }\n  }, [isAuthenticated]);\n\n  const handleAddStory = async (file, caption) => {\n    try {\n      const resizedImage = await resizeImage(file);\n      const result = await api.uploadStory(resizedImage, caption);\n      \n      if (result.error) {\n        toast.error(result.error);\n      } else {\n        toast.success('Story uploaded successfully!');\n        loadStories(); // Refresh stories\n      }\n    } catch (error) {\n      toast.error('Failed to upload story');\n    }\n  };\n\n  const handleStoryClick = (userId) => {\n    const groupedStories = groupStoriesByUser(stories);\n    setSelectedUserStories(groupedStories[userId].stories);\n    setViewerOpen(true);\n  };\n\n  const handleStoryViewed = () => {\n    // Refresh stories to update view status\n    loadStories();\n  };\n\n  const handlePostCreated = async (content) => {\n    const result = await api.createPost(content);\n    if (result.error) {\n      throw new Error(result.error);\n    }\n    loadPosts(); // Refresh posts\n  };\n\n  const handleCloseViewer = () => {\n    setViewerOpen(false);\n  };\n\n  if (!isAuthenticated) {\n    return <AuthModal />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white dark:bg-gray-900\">\n      <div className=\"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700\">\n        <h1 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n          Stories\n        </h1>\n        <div className=\"flex items-center space-x-4\">\n          <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n            Welcome, {user?.username}\n          </span>\n          <button\n            onClick={logout}\n            className=\"px-3 py-1 text-sm text-white bg-red-500 hover:bg-red-600 font-medium rounded-md border border-red-500 hover:border-red-600 transition-all duration-200\"\n          >\n            Logout\n          </button>\n        </div>\n      </div>\n\n      <StoriesBar \n        stories={stories}\n        onAddStory={handleAddStory}\n        onStoryClick={handleStoryClick}\n      />\n      \n      <div className=\"max-w-2xl mx-auto px-4 py-8\">\n        <PostComposer onPostCreated={handlePostCreated} user={user} />\n        <PostsFeed posts={posts} onPostsUpdate={loadPosts} />\n      </div>\n\n      {viewerOpen && (\n        <StoryViewer\n          userStories={selectedUserStories}\n          onClose={handleCloseViewer}\n          onStoryViewed={handleStoryViewed}\n        />\n      )}\n      \n      <Toaster position=\"top-right\" />\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <AppContent />\n    </AuthProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}